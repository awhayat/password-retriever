<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Pixel Pass</title>
    <style>
    body {
      background-color: black;
    }

    h1 {
      font-family: "Verdana";
      color: white;
    }

    p {
      color: white;
    }

    figcaption {
      color: white;
    }

    button {
        background-color: black;
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
    }
    </style>
  </head>
  
  <body>
    <center id="center">
      <h1>Pixel Pass</h1>
      <img crossorigin="anonymous" id="1" src="http://res.cloudinary.com/coursepics/image/upload/v1490223557/1_n8qnj3.jpg" width="125" height="125" onclick="create_canvas(1)">
      <img crossorigin="anonymous" id="2" src="http://res.cloudinary.com/coursepics/image/upload/v1490223594/2_civgpg.jpg" width="125" height="125" onclick="create_canvas(2)">
      <img crossorigin="anonymous" id="3" src="http://res.cloudinary.com/coursepics/image/upload/v1490223597/3_rnh5jr.jpg" width="125" height="125" onclick="create_canvas(3)">
      <img crossorigin="anonymous" id="4" src="http://res.cloudinary.com/coursepics/image/upload/v1490223601/4_ucnysa.jpg" width="125" height="125" onclick="create_canvas(4)">
      <img crossorigin="anonymous" id="5" src="http://res.cloudinary.com/coursepics/image/upload/v1490223604/5_znnqfg.jpg" width="125" height="125" onclick="create_canvas(5)">
      <br>
      <img crossorigin="anonymous" id="6" src="http://res.cloudinary.com/coursepics/image/upload/v1490285205/6_cwxfii.jpg" width="125" height="125" onclick="create_canvas(6)">
      <img crossorigin="anonymous" id="7" src="http://res.cloudinary.com/coursepics/image/upload/v1490285213/7_a46dlq.jpg" width="125" height="125" onclick="create_canvas(7)">
      <img crossorigin="anonymous" id="8" src="http://res.cloudinary.com/coursepics/image/upload/v1490285215/8_iiyu2c.jpg" width="125" height="125" onclick="create_canvas(8)">
      <img crossorigin="anonymous" id="9" src="http://res.cloudinary.com/coursepics/image/upload/v1490285220/9_vo20uz.jpg" width="125" height="125" onclick="create_canvas(9)">
      <img crossorigin="anonymous" id="10" src="http://res.cloudinary.com/coursepics/image/upload/v1490285223/10_kncbeo.jpg" width="125" height="125" onclick="create_canvas(10)">
      <br>
      <img crossorigin="anonymous" id="11" src="http://res.cloudinary.com/coursepics/image/upload/v1490285227/11_toexfa.jpg" width="125" height="125" onclick="create_canvas(11)">
      <img crossorigin="anonymous" id="12" src="http://res.cloudinary.com/coursepics/image/upload/v1490285229/12_nhbpua.jpg" width="125" height="125" onclick="create_canvas(12)">
      <img crossorigin="anonymous" id="13" src="http://res.cloudinary.com/coursepics/image/upload/v1490285233/13_jejrey.jpg" width="125" height="125" onclick="create_canvas(13)">
      <img crossorigin="anonymous" id="14" src="http://res.cloudinary.com/coursepics/image/upload/v1490285238/14_u3meru.jpg" width="125" height="125" onclick="create_canvas(14)">
      <img crossorigin="anonymous" id="15" src="http://res.cloudinary.com/coursepics/image/upload/v1490285244/15_z2vwbk.jpg" width="125" height="125" onclick="create_canvas(15)">
    </center>

    <center><button id="button" onclick="help()"><p id="help">Help</p></button></center>

    <script>
      function create_canvas(image) {
        var counter = 1;
        while (counter <= 400) {
          var idtoset = "canvas";
          var counternum = counter.toString();
          idtoset = idtoset.concat(counternum);
          var newcanvas = document.createElement("CANVAS");
          newcanvas.setAttribute("id", idtoset);
          newcanvas.setAttribute("width", "25");
          newcanvas.setAttribute("height", "25");
          var functionname = "create_password1(";
          functionname = functionname.concat(idtoset);
          functionname = functionname.concat(")");
          newcanvas.setAttribute("onclick", functionname);
          var functionname2 = "create_password2(";
          functionname2 = functionname2.concat(idtoset);
          functionname2 = functionname2.concat(")");
          newcanvas.setAttribute("oncontextmenu", functionname2);
          document.body.appendChild(newcanvas);
          if (counter % 20 == 0) {
            var breakline = document.createElement("BR");
            document.body.appendChild(breakline);
          }
          counter++;
        }
        
        var imgid = image.toString();
        var img = document.getElementById(imgid);
        
        var center = document.getElementById("center");
        var img1 = document.getElementById("1");
        var img2 = document.getElementById("2");
        var img3 = document.getElementById("3");
        var img4 = document.getElementById("4");
        var img5 = document.getElementById("5");
        var img6 = document.getElementById("6");
        var img7 = document.getElementById("7");
        var img8 = document.getElementById("8");
        var img9 = document.getElementById("9");
        var img10 = document.getElementById("10");
        var img11 = document.getElementById("11");
        var img12 = document.getElementById("12");
        var img13 = document.getElementById("13");
        var img14 = document.getElementById("14");
        var img15 = document.getElementById("15");
        center.removeChild(img1);
        center.removeChild(img2);
        center.removeChild(img3);
        center.removeChild(img4);
        center.removeChild(img5);
        center.removeChild(img6);
        center.removeChild(img7);
        center.removeChild(img8);
        center.removeChild(img9);
        center.removeChild(img10);
        center.removeChild(img11);
        center.removeChild(img12);
        center.removeChild(img13);
        center.removeChild(img14);
        center.removeChild(img15);
        
        var canvas = "canvas";
        var n = 1;
        var startx = 0;
        var starty = 0;
        while (n <= 400) {
          startx = n % 20;
          startx = startx * 25;

          var num = n.toString();
          var id = canvas.concat(num);

          var c = document.getElementById(id);
          var ctx = c.getContext("2d");
          ctx.drawImage(img, startx, starty, 25, 25, 0, 0, 25, 25);
          n++;
          if (n % 20 == 1 && n != 1) {
            starty = starty + 25;
          }
        }
      }

      function inArray(item , array, click) {
          var length = array.length;
          var count = 0;
          if (click == 1) {
            for (var i = 0; i < length; i++) {
                if (array[i] === item) {
                  count = count + 1;
                }
            }
            if (count > 1) {
              return true;
            }
            return false;
          } else {
            for (var i = 0; i < length; i++) {
                if (array[i] === item) {
                  return true;
                }
            }
            return false;
          }        
      }

      function create_password1(id) {
        var password = "";
        var add = "";
        var used = [];
        var characters = ["8", "J", "U", "5", "I", "C", "l", "u", "0", "E", "1", "F", "g", "V", "W", "h", "X", "r", "j", "9", "k", "Q", "M", "L", "d", "m", "O", "6", "o", "n", "7", "P", "q", "K", "R", "c", "s", "2", "t", "T", "3", "b", "v", "G", "H", "w", "x", "i", "a", "Y", "z", "4", "e", "f", "S", "p", "Z", "B", "N", "D", "y", "A"]; 
        var pos = 0;
        
        c = document.getElementById(id.id);
        ctx = c.getContext("2d");
        var imgData = ctx.getImageData(0, 0, c.width, c.height);
        
        for (var i = 0; i < 16; i+=4) {
          pos = imgData.data[i + 3] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i + 1] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i + 2] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
        }

        var message = "Your password is: ";
        message = message.concat(password);
        window.alert(message);
      }

      function create_password2(id) {
        var password = "";
        var add = "";
        var used = [];
        var characters = ["5", "W", "d", "2", "3", "m", "B", "l", "w", "A", "N", "p", "R", "F", "y", "e", "1", "x", "i", "L", "O", "g", "0", "v", "V", "D", "r", "s", "I", "t", "Z", "H", "G", "h", "b", "f", "9", "4", "X", "C", "k", "J", "K", "6", "P", "T", "Q", "8", "u", "M", "c", "7", "q", "Y", "o", "a", "U", "n", "j", "z", "S", "E"];
        var pos = 0;
        
        c = document.getElementById(id.id);
        ctx = c.getContext("2d");
        var imgData = ctx.getImageData(0, 0, c.width, c.height);
        
        for (var i = 0; i < 16; i+=4) {
          pos = imgData.data[i + 2] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i + 1] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
          
          pos = imgData.data[i + 3] % 62;
          add = characters[pos];
          while (inArray(add, used, 1)) {
            pos = pos + 1;
            add = characters[pos];
            if (pos == 61) {
              pos = 0;
            }
          }
          used.push(add);
          password = password.concat(add);
        }

        var message = "Your password is: ";
        message = message.concat(password);
        window.alert(message);
      }

      function help() {
        var button = document.getElementById("button");
        var para1 = document.getElementById("help");
        button.removeChild(para1);
        var para2 = document.createElement("p");
        var node = document.createTextNode("Choose an image and either click or right-click on a particular point that you can easily remember but isn't obvious. Depending on the kind of click, this will generate a specific 16-character password. Clicking on the same point again (within a certain margin of error) will regenerate the same password.");
        para2.appendChild(node);
        button.appendChild(para2);
        button.setAttribute("onclick", "");
      }
    </script>
  </body>
   
</html>